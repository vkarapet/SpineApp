MMAT Development Startup
========================

Prerequisites: Node.js installed, dependencies installed (npm install in both mmat/ and mmat/server/).

Option A: Dev Mode (live reload, no offline support)
-----------------------------------------------------

1. Start the proxy stub (in one terminal):

   cd mmat/server
   npm start

   You should see: "MMAT Proxy Stub running on http://localhost:3001"

2. Start the dev server (in a second terminal):

   cd mmat
   npm run dev

   You should see:
     Local:   http://localhost:5173/
     Network: http://192.168.x.x:5173/

3. Open the app:
   - On your laptop: http://localhost:5173
   - On your phone (same WiFi): use the Network URL printed above

Note: This mode requires a connection to your laptop at all times.

Option B: Production Mode (offline support, add-to-home-screen)
----------------------------------------------------------------

1. Build the production app:

   cd mmat
   npm run build

2. Start the proxy stub (in one terminal):

   cd mmat/server
   npm start

3. Start the preview server (in a second terminal):

   cd mmat
   npm run preview

   You should see:
     Local:   http://localhost:4173/
     Network: http://192.168.x.x:4173/

4. Open the app on your phone using the Network URL.

5. The first visit caches all app files via the service worker. After that,
   the app works fully offline â€” assessments, history, settings all function
   without a network connection. Sync happens when connectivity is restored.

6. To add to your home screen: use the browser menu > "Add to Home Screen".
   The app will launch in standalone mode and work offline.

Note: After code changes, you must run "npm run build" again and refresh
the app (or wait for the "New version available" banner).

Shutting Down
-------------

Press Ctrl+C in each terminal window to stop the respective server.

Notes
-----

- The proxy stub uses an in-memory store. All data is lost when it stops.
- Both dev and preview servers proxy /api/* requests to the proxy stub.
- Phone access requires both devices on the same WiFi network.
- In production mode, the service worker precaches ~240KB of assets.
  After first load, the app is fully functional offline.
